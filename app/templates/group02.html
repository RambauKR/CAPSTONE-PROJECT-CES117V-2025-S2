{% extends "layout.html" %}
{% block content %}
<div class="row mt-10">
    <div class="col-12">
        <div class="alert alert-secondary text-center">
            <strong>Group 02</strong> - Live Camera Feed
        </div>
    </div>
</div>

<p>Select which objects to blur in the live feed:</p>
 
<form id="blurForm">
    <label><input type="checkbox" name="classes" value="person"> Person</label>
    <label><input type="checkbox" name="classes" value="face"> Face</label>
    <label><input type="checkbox" name="classes" value="license_plate"> License Plate</label>
    <label><input type="checkbox" name="classes" value="car"> Car</label>
    <label><input type="checkbox" name="classes" value="truck"> Car</label>
    <button type="submit">Apply Settings</button>
</form>

<div class="row mt-10">
    <div class="col-12 d-flex justify-content-center">
        <img src="{{ url_for('video_feed', route='/group02') }}" width="800" class="img-fluid">
    </div>
</div>

<script>
    const form = document.getElementById("blurForm");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const selected = Array.from(document.querySelectorAll('input[name="classes"]:checked'))
        .map(cb => cb.value);
 
      const response = await fetch("/set_blur_classes", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ classes: selected })
      });
 
      if (response.ok) {
        alert("✅ Blur settings updated successfully!");
      } else {
        alert("❌ Failed to update blur settings.");
      }
    });
</script>

{% endblock content %}


